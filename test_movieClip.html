<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8" />
	<title>pixi.js example 3 using a movieclip</title>
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
	<style>
		body {
			margin: 0;
			padding: 0;
			background-color: #000000;
		}
	</style>
	<script src="js/pixi.js"></script>
</head>
<body>
	<script>
	var t = [], tmax;

	// create an array of assets to load
	var assetsToLoader = [ "img/anim-0.json", "img/anim-1.json", "img/anim-2.json", "img/anim-3.json"];
	
	// create a new loader
	loader = new PIXI.AssetLoader(assetsToLoader);
	
	// use callback
	loader.onComplete = onAssetsLoaded
	
	//begin load
	loader.load();
	
	
	// holder to store aliens
	var explosions = [];
	
	var count = 0;
		
	// create an new instance of a pixi stage
	var stage = new PIXI.Stage(0x333333);
	
	// create a renderer instance.
	renderer = PIXI.autoDetectRenderer( window.innerWidth,  window.innerHeight);
		
	// add the renderer view element to the DOM
	document.body.appendChild(renderer.view);
	
	function onAssetsLoaded()
	{
		// create an array to store the textures
		var anim = [];
		for(var j=0; j<4; j++){
			anim[j] = [];
		}
		var texture;
		for (var i=0; i < 15; i++) 
		{
		 	texture = PIXI.Texture.fromFrame("anim-0 " + (i+1));
		 	anim[0].push(texture);

		 	texture = PIXI.Texture.fromFrame("anim-1 " + (i+1));
		 	anim[1].push(texture);

		 	texture = PIXI.Texture.fromFrame("anim-2 " + (i+1));
		 	anim[2].push(texture);

		 	texture = PIXI.Texture.fromFrame("anim-3 " + (i+1));
		 	anim[3].push(texture);
		};
		
		for (var i = 0; i < 2000; i++) 
		{
			t[i] = new PIXI.MovieClip(anim[Math.floor(Math.random()*4)]);
			t[i].position.x = Math.random() * window.innerWidth;
			t[i].position.y = Math.random() * window.innerHeight;
			t[i].anchor.x = 0.5;
			t[i].anchor.y = 0.5;
			t[i].rotation = Math.random() * Math.PI;
			t[i].scale.x = t[i].scale.y =rand(0.5, 2)// 0.75 + Math.random() * 0.5;
			t[i].gotoAndPlay(Math.random() * 15);
			
			stage.addChild(t[i]);
		}
		
		// start animating
		requestAnimFrame( animate );
		
	}	
	
	function animate() {
	
	    requestAnimFrame( animate );

	    renderer.render(stage);
	}

	function rand(min, max) { return (Math.random()*(max-min))+min; };

	</script>

	</body>
</html>
